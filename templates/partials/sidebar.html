{% load configuration_tags   %}
{% load static %}
{% block sidebar %}
<!-- ========== Left Sidebar Start ========== -->
<div class="vertical-menu">
  <div data-simplebar class="h-100">
    <!--- Sidemenu -->
    <div id="sidebar-menu">
      <!-- Left Menu Start -->
      <ul class="metismenu list-unstyled" id="side-menu">
        <li class="menu-title" key="t-menu">Menu</li>
          {% get_menu_list request as menu %}

          {% for i in menu %}
            {% if i.get_sub_menus.count > 0 %}
            <li>
               <a href="javascript: void(0);" class="has-arrow waves-effect">
                    <i class="{{i.icon}}"></i>
                    <span key="t-contacts">{{i.name}}</span>
               </a>
               <ul class="sub-menu mm-collapse" aria-expanded="false">
                    {% for submenus in i.get_sub_menus %}
                      {% if submenus.slug == 'archive' %}
                        <li><a href="{{i.app_link}}?archive=show" key="t-user-list">{{submenus.name}}</a></li>
                      
                      {% elif submenus.slug == 'reporting-month' %}
                          <li><a onclick='CurrentMonth("{{i.app_link}}")' key="t-user-list">{{submenus.name}}</a></li>
                      {% else %}
                        {% if submenus.get_sub_menus.count > 0 %}
                        <li>
                          <a href="javascript: void(0);" class="has-arrow waves-effect">
                            {% if submenus.icon %}<i class="{{submenus.icon}}"></i>{% endif %}
                            <span key="t-contacts">{{submenus.name}}</span>
                          </a>
                          <ul class="sub-menu mm-collapse" aria-expanded="false">
                            {% for undersubmenus in submenus.get_sub_menus %}
                            <li><a href="{{undersubmenus.app_link}}" key="t-user-list">{{undersubmenus.name}}</a></li>
                            {% endfor %}
                          </ul>
                        </li>
                        {% else %}
                          <li><a href="{{submenus.app_link}}" key="t-user-list">{{submenus.name}}</a></li>
                        {% endif %}
                        {% endif %}
                    {% endfor %}
               </ul>
            </li>
            {% else %}
            {% if request.session.partner_mission_mapping_id and request.user|has_group:"Partner Data Entry Operator" %}
            <li>
              <a href="{{i.app_link}}" class="waves-effect">
                <i class="{{i.icon}}"></i>
                <span key="t-file-manager">{{i.name}}</span>
              </a>
            </li>
            {% else %}
            <li>
              <a href="{{i.app_link}}" class="waves-effect">
                <i class="{{i.icon}}"></i>
                <span key="t-file-manager">{{i.name}}</span>
              </a>
            </li>
            {% endif %}
            {% endif %}
          {% endfor %}

        
        
      </ul>
    </div>
    <!-- Sidebar -->
  </div>
</div>
<!-- Left Sidebar End -->
<script type="text/javascript">
    $(document).ready(function() {
        $('#side-menu').on('hidden.metisMenu', function(event) {
            $(event.target).prev().removeClass('mm-active');
        });
    });
  function CurrentMonth(slug)
  {
      var today = new Date();
      var date = today.getFullYear()+'-'+today.getMonth()
      var url = slug+'?month_year='+date
      window.location.href = url
  };
</script>
{% endblock %}

